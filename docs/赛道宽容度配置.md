# 赛道宽容度配置指南

## 距离匹配阈值建议

### 精确赛道模式 (25米)
**适用场景：**
- 专业赛车场（如上海国际赛车场、北京金港）
- 卡丁车赛道
- 封闭式测试场地

**特点：**
- 路线固定且精确
- 要求高精度匹配
- 适合专业计时需求

### 街道赛道模式 (40米) ✅ **推荐默认**
**适用场景：**
- 城市街道
- 山路弯道
- 工业园区道路
- 大多数非专业场地

**特点：**
- 平衡精度与实用性
- 允许不同行驶线
- 适合日常使用

### 一般道路模式 (50米)
**适用场景：**
- 国道省道
- 城市环路
- 较宽的道路

**特点：**
- 较高的宽容度
- 适合长距离测试
- GPS精度要求较低

### 高速公路模式 (80米)
**适用场景：**
- 高速公路直线加速
- 机场跑道
- 超长直线测试

**特点：**
- 最高宽容度
- 主要关注纵向性能
- 横向偏移容忍度最高

## 相似度阈值建议

| 场景类型 | 距离阈值 | 相似度阈值 | 说明 |
|---------|---------|-----------|------|
| 精确赛道 | 25m | 95% | 要求最高精度 |
| 街道赛道 | 40m | 90% | 平衡精度与实用性 |
| 一般道路 | 50m | 85% | 中等精度要求 |
| 高速公路 | 80m | 80% | 注重直线性能 |

## GPS设备精度对应建议

| GPS设备类型 | 精度范围 | 推荐阈值 | 备注 |
|------------|---------|----------|------|
| 专业Dragy | 1-2m | 25-30m | 可使用精确模式 |
| 高端手机 | 2-3m | 30-40m | 推荐街道模式 |
| 一般手机 | 3-5m | 40-50m | 使用一般模式 |
| 老旧设备 | 5-10m | 50-80m | 使用宽松模式 |

## 实际应用建议

### 新手用户
- **距离阈值**：50米
- **相似度阈值**：85%
- **原因**：更容易匹配成功，提高使用体验

### 专业用户
- **距离阈值**：25-30米
- **相似度阈值**：90-95%
- **原因**：更精确的数据，适合专业分析

### 测试调试
- **距离阈值**：80米
- **相似度阈值**：70%
- **原因**：便于快速测试功能

## 动态调整策略

可以根据以下因素动态调整：

1. **GPS信号质量**
   - 信号强时降低阈值
   - 信号弱时提高阈值

2. **速度范围**
   - 低速精确模式（<60km/h）：25-30米
   - 中速标准模式（60-120km/h）：40-50米
   - 高速宽松模式（>120km/h）：60-80米

3. **赛道类型自动识别**
   - 检测转弯半径和直线长度
   - 自动选择合适的阈值

## 当前配置状态

```kotlin
// 当前默认设置（街道赛道模式）
THRESHOLD_STREET_CIRCUIT = 40.0    // 40米距离阈值
DEFAULT_SIMILARITY_THRESHOLD = 0.95f // 95%相似度
```

**评估：** 当前配置偏向精确，适合大多数场景，但可能对GPS精度要求较高。建议可以考虑降低相似度阈值到90%以提高匹配成功率。